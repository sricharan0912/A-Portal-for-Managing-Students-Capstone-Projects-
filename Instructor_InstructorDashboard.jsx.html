<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Instructor/InstructorDashboard.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Instructor/InstructorDashboard.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useState, useEffect } from "react";
import { useLocation, useNavigate } from "react-router-dom";
import DashboardNavbar from "../components/DashboardNavbar";
import InstructorSidebar from "./InstructorSidebar";
import InstructorDashboardView from "./InstructorDashboardView";
import ProjectApprovalView from "./ProjectApprovalView";
import AssignGroupsView from "./AssignGroupsView";
import StudentsView from "./StudentsView";
import AddStudentForm from "./AddStudentForm";
import ProjectsView from "./ProjectsView";
import ProjectDetailsView from "./ProjectDetailsView";
import CreateProjectForm from "./CreateProjectForm";
import GroupsView from "./GroupsView";
import AutoGroupFormationView from "./AutoGroupFormationView";
import CreateGroupForm from "./CreateGroupForm";
import EvaluationsView from "./EvaluationsView";
import ScheduleEvaluationForm from "./ScheduleEvaluationForm";
import ProfileSettingsView from "./ProfileSettingsView";
import CourseSettingsView from "./CourseSettingsView";

/**
 * Layout constant: Height of the top navigation bar in pixels
 * Used for calculating content area margins
 * @constant {number}
 */
const NAVBAR_HEIGHT = 64;

/**
 * Layout constant: Width of the sidebar drawer in pixels when open
 * Used for calculating content area margins
 * @constant {number}
 */
const DRAWER_WIDTH = 280;

/**
 * Instructor Dashboard Component
 * 
 * Main container component for the instructor portal dashboard.
 * Manages navigation between multiple views including project approvals, student management,
 * group formation, evaluations, and settings. Uses URL-based routing for proper browser
 * history and deep linking support.
 * 
 * Features:
 * - URL-based routing with React Router for proper navigation history
 * - Multi-view navigation (dashboard, students, projects, groups, evaluations, settings)
 * - Project approval workflow
 * - Automated and manual group formation
 * - Student management (view, add)
 * - Evaluation scheduling
 * - Responsive sidebar with toggle
 * - Authentication guard with redirect
 * - Profile and course settings
 * 
 * Available Views:
 * - dashboard: Overview stats and quick actions
 * - students: Student list view
 * - add-student: Add new student form
 * - projects: All projects view
 * - project-details: Individual project details
 * - create-project: Create new project form
 * - approval: Project approval queue
 * - groups: View all groups
 * - manage-groups: Group management interface
 * - auto-groups: Automated group formation
 * - create-group: Manual group creation
 * - evaluations: Evaluation list
 * - schedule-evaluation: Schedule new evaluation
 * - settings: Course settings
 * - profile: Instructor profile settings
 * 
 * @component
 * @returns {React.ReactElement} Instructor dashboard with URL-based routing
 * 
 * @example
 * // Used in App.jsx routing
 * &lt;Route 
 *   path="/instructor-dashboard/*" 
 *   element={&lt;InstructorDashboard />} 
 * />
 * 
 * @example
 * // Direct navigation to specific view
 * &lt;Link to="/instructor-dashboard/approval">Project Approvals&lt;/Link>
 * 
 * @example
 * // Protected route implementation
 * &lt;Route 
 *   path="/instructor-dashboard/*" 
 *   element={
 *     &lt;ProtectedRoute role="instructor">
 *       &lt;InstructorDashboard />
 *     &lt;/ProtectedRoute>
 *   } 
 * />
 */
export default function InstructorDashboard() {
  /**
   * Retrieve and parse instructor data from localStorage
   * Contains instructor information like name, email, and ID
   * @type {string|null}
   */
  const instructorData = localStorage.getItem("instructor");
  
  /**
   * Parsed instructor object from localStorage
   * @type {Object|null}
   */
  const instructor = instructorData ? JSON.parse(instructorData) : null;

  /**
   * Extract numeric instructor database ID
   * Used for API calls and data fetching
   * @type {number|null}
   */
  const instructorId = instructor?.id || null;
  
  /**
   * Combine first_name and last_name for display in navbar
   * Falls back to name field or generic "Instructor" if not available
   * @type {string}
   */
  const instructorName = instructor?.first_name &amp;&amp; instructor?.last_name
    ? `${instructor.first_name} ${instructor.last_name}`
    : instructor?.name || "Instructor";

  /**
   * React Router location hook for accessing current URL
   * Used to determine active view from pathname
   * @type {Location}
   */
  const location = useLocation();
  
  /**
   * React Router navigation hook for programmatic navigation
   * Used to change views and handle redirects
   * @type {NavigateFunction}
   */
  const navigate = useNavigate();
  
  /**
   * UI State: Controls sidebar visibility
   * @type {boolean}
   */
  const [sidebarOpen, setSidebarOpen] = useState(false);

  /**
   * Determine active view from current URL path
   * 
   * Parses the current pathname to identify which view should be displayed.
   * Checks URL segments in priority order to match the most specific route first.
   * 
   * @function getActiveFromPath
   * @returns {string} Active view identifier
   * 
   * @example
   * // URL: /instructor-dashboard/approval
   * getActiveFromPath() // Returns: "approval"
   * 
   * @example
   * // URL: /instructor-dashboard/projects/123
   * getActiveFromPath() // Returns: "project-details"
   */
  const getActiveFromPath = () => {
    const path = location.pathname;
    
    if (path.includes("/add-student")) return "add-student";
    if (path.includes("/students")) return "students";
    if (path.includes("/create-project")) return "create-project";
    if (path.includes("/projects/")) return "project-details";
    if (path.includes("/projects")) return "projects";
    if (path.includes("/approval")) return "approval";
    if (path.includes("/auto-groups")) return "auto-groups";
    if (path.includes("/create-group")) return "create-group";
    if (path.includes("/manage-groups")) return "manage-groups";
    if (path.includes("/groups")) return "groups";
    if (path.includes("/schedule-evaluation")) return "schedule-evaluation";
    if (path.includes("/evaluations")) return "evaluations";
    if (path.includes("/settings")) return "settings";
    if (path.includes("/profile")) return "profile";
    return "dashboard";
  };

  /**
   * Current active view based on URL path
   * Automatically updates when URL changes
   * @type {string}
   */
  const active = getActiveFromPath();

  /**
   * Navigate to different views using URL routing
   * 
   * Updates the browser URL to reflect the selected view, which adds to browser history
   * and enables proper back/forward button functionality. Each view has a unique URL path.
   * 
   * @function setActive
   * @param {string} view - View identifier to navigate to
   * 
   * @example
   * // Navigate to students view
   * setActive('students') // URL becomes: /instructor-dashboard/students
   * 
   * @example
   * // Navigate to approval view
   * setActive('approval') // URL becomes: /instructor-dashboard/approval
   * 
   * @example
   * // Logout action
   * setActive('logout') // Clears localStorage and redirects to login
   */
  const setActive = (view) => {
    const basePath = "/instructor-dashboard";
    switch (view) {
      case "students":
        navigate(`${basePath}/students`);
        break;
      case "add-student":
        navigate(`${basePath}/add-student`);
        break;
      case "projects":
        navigate(`${basePath}/projects`);
        break;
      case "create-project":
        navigate(`${basePath}/create-project`);
        break;
      case "approval":
        navigate(`${basePath}/approval`);
        break;
      case "groups":
        navigate(`${basePath}/groups`);
        break;
      case "manage-groups":
        navigate(`${basePath}/manage-groups`);
        break;
      case "auto-groups":
        navigate(`${basePath}/auto-groups`);
        break;
      case "create-group":
        navigate(`${basePath}/create-group`);
        break;
      case "evaluations":
        navigate(`${basePath}/evaluations`);
        break;
      case "schedule-evaluation":
        navigate(`${basePath}/schedule-evaluation`);
        break;
      case "settings":
        navigate(`${basePath}/settings`);
        break;
      case "profile":
        navigate(`${basePath}/profile`);
        break;
      case "logout":
        handleLogout();
        break;
      case "dashboard":
      default:
        navigate(basePath);
        break;
    }
  };

  /**
   * Effect: Redirect to login if not authenticated
   * 
   * Checks for valid instructor data and ID on mount and whenever they change.
   * Uses replace: true to prevent adding to browser history (can't go back to dashboard).
   * 
   * Dependencies: [instructor, instructorId, navigate]
   */
  useEffect(() => {
    if (!instructor || !instructorId) {
      navigate("/login", { replace: true });
    }
  }, [instructor, instructorId, navigate]);

  /**
   * Handle logout
   * 
   * Clears instructor data and auth token from localStorage,
   * then redirects to login page with replace navigation
   * 
   * @function handleLogout
   * 
   * @example
   * &lt;button onClick={handleLogout}>Logout&lt;/button>
   */
  const handleLogout = () => {
    localStorage.removeItem("instructor");
    localStorage.removeItem("authToken");
    navigate("/login", { replace: true });
  };

  /**
   * Loading State: Show while authentication check is in progress
   * 
   * Displays loading spinner during the brief moment when authentication
   * is being verified and before redirect to login occurs
   */
  if (!instructor || !instructorId) {
    return (
      &lt;div className="flex min-h-screen items-center justify-center bg-slate-50">
        &lt;div className="text-center">
          &lt;div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4">&lt;/div>
          &lt;p className="text-slate-600">Redirecting to login...&lt;/p>
        &lt;/div>
      &lt;/div>
    );
  }

  return (
    &lt;div className="flex min-h-screen flex-col bg-slate-50">
      {/* Top Navigation Bar */}
      &lt;DashboardNavbar
        role="instructor"
        title="Instructor Dashboard"
        userName={instructorName}
        onMenuClick={() => setSidebarOpen((s) => !s)}
        onLogout={handleLogout}
      />

      {/* Sidebar Navigation */}
      &lt;InstructorSidebar
        active={active}
        setActive={setActive}
        sidebarOpen={sidebarOpen}
        setSidebarOpen={setSidebarOpen}
      />

      {/* Main Content Area */}
      &lt;div
        className="flex-1 px-4 transition-[margin] duration-300 ease-in-out sm:px-6 lg:px-8"
        style={{
          marginTop: `${NAVBAR_HEIGHT}px`,
          marginLeft: sidebarOpen ? `${DRAWER_WIDTH}px` : "0px",
          paddingTop: "1.5rem",
          paddingBottom: "2rem",
        }}
      >
        &lt;main className="mx-auto max-w-7xl pb-8">
          {/* Existing sections */}
          {active === "dashboard" &amp;&amp; &lt;InstructorDashboardView instructorId={instructorId} />}
          {active === "approval" &amp;&amp; &lt;ProjectApprovalView instructorId={instructorId} />}
          {active === "groups" &amp;&amp; &lt;GroupsView instructorId={instructorId} />}

          {/* New sections */}
          {active === "students" &amp;&amp; &lt;StudentsView instructorId={instructorId} />}
          {active === "add-student" &amp;&amp; &lt;AddStudentForm instructorId={instructorId} />}
          {active === "projects" &amp;&amp; &lt;ProjectsView instructorId={instructorId} />}
          {active === "project-details" &amp;&amp; &lt;ProjectDetailsView instructorId={instructorId} />}
          {active === "create-project" &amp;&amp; &lt;CreateProjectForm instructorId={instructorId} />}
          {active === "manage-groups" &amp;&amp; &lt;GroupsView instructorId={instructorId} />}
          {active === "auto-groups" &amp;&amp; &lt;AutoGroupFormationView instructorId={instructorId} />}
          {active === "create-group" &amp;&amp; &lt;CreateGroupForm instructorId={instructorId} />}
          {active === "evaluations" &amp;&amp; &lt;EvaluationsView instructorId={instructorId} />}
          {active === "schedule-evaluation" &amp;&amp; &lt;ScheduleEvaluationForm instructorId={instructorId} />}
          {active === "settings" &amp;&amp; &lt;CourseSettingsView />}
          {active === "profile" &amp;&amp; &lt;ProfileSettingsView instructorId={instructorId} />}
        &lt;/main>
      &lt;/div>

      {/* Footer */}
      &lt;footer className="mt-auto border-t border-slate-200 bg-white py-6 text-center text-sm text-slate-500">
        Â© 2025 Capstone Hub. All rights reserved. | Contact:{" "}
        
          className="text-blue-600 hover:underline"
          href="mailto:support@capstonehub.com"
        &amp;gt
          support@capstonehub.com
        
      &lt;/footer>
    &lt;/div>
  );
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-apiHelper.html">apiHelper</a></li><li><a href="module-firebaseConfig.html">firebaseConfig</a></li></ul><h3>Global</h3><ul><li><a href="global.html#API_BASE_URL">API_BASE_URL</a></li><li><a href="global.html#DRAWER_WIDTH">DRAWER_WIDTH</a></li><li><a href="global.html#NAVBAR_HEIGHT">NAVBAR_HEIGHT</a></li><li><a href="global.html#StatCard">StatCard</a></li><li><a href="global.html#animationStyles">animationStyles</a></li><li><a href="global.html#getActiveFromPath">getActiveFromPath</a></li><li><a href="global.html#handleEditProject">handleEditProject</a></li><li><a href="global.html#handleFormClose">handleFormClose</a></li><li><a href="global.html#handleFormSave">handleFormSave</a></li><li><a href="global.html#handleLogout">handleLogout</a></li><li><a href="global.html#handleProjectCreated">handleProjectCreated</a></li><li><a href="global.html#handleSelectProject">handleSelectProject</a></li><li><a href="global.html#handleShowForm">handleShowForm</a></li><li><a href="global.html#handleSubmitPreferences">handleSubmitPreferences</a></li><li><a href="global.html#loadDeadline">loadDeadline</a></li><li><a href="global.html#loadGroupData">loadGroupData</a></li><li><a href="global.html#loadPreferences">loadPreferences</a></li><li><a href="global.html#loadProjects">loadProjects</a></li><li><a href="global.html#refetchProjects">refetchProjects</a></li><li><a href="global.html#setActive">setActive</a></li><li><a href="global.html#submitPreferences">submitPreferences</a></li><li><a href="global.html#useClientId">useClientId</a></li><li><a href="global.html#useProjects">useProjects</a></li><li><a href="global.html#useStudentId">useStudentId</a></li><li><a href="global.html#useStudentPreferences">useStudentPreferences</a></li><li><a href="global.html#useStudentProjects">useStudentProjects</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Mon Dec 22 2025 21:57:25 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
